!function(){function n(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function t(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{},o=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),o.forEach((function(r){n(t,r,e[r])}))}return t}var r=function(n){return document.createElement(n)},e=function(n){return document.querySelector(n)},o=function(n){return n.classList},u=function(n,t,r){return n.setAttribute(t,r)},i=function(n,t){return n.getAttribute(t)},a=function(n,t,r){return n.style.setProperty(t,r)},c=function(n,t){return window.localStorage.setItem(n,t)},l="1",f="3",d="4",s="5",v="6",h="light",m="dark",b="lazy",p="cell",y="flipped_cell",w="board",g="menu",k="menu-title",O="menu-title-item",S="status-line-button",j="background-color",C="border-bottom",A="outline",E="outline-offset",T="color",I={location:l,board:[],moves:[],solution:[],pattern:null,theme:h},L=t({},I),M=[];function x(n,t){Object.assign(L,n);var r=Object.keys(n);t&&M.forEach((function(n){var t=n.properties,e=n.callback;(t.some((function(n){return r.includes(n)}))||0===t.length)&&e(L)}))}function P(n){x(n,!0)}function _(){return L}function z(n,t,r){var e=Object.keys(L);n.forEach((function(n){if(!e.includes(n))throw new Error("".concat(n," is not key in the state."))})),M.push({properties:n,callback:t,name:r})}function H(n){M=M.filter((function(t){return t.name!==n}))}function N(n){if(Array.isArray(n))return n}function D(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function J(n,t){if(n){if("string"==typeof n)return B(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(n,t):void 0}}function R(n,t){return N(n)||D(n)||J(n,t)||q()}var U,W,Y,$,F,G="row_index",K="column_index",Q="5px",V="2px",X="82a14105-d791-49b1-a07a-6500b49e2cdb",Z=(n($={},h,(n(U={},g,[[j,"white"]]),n(U,k,[[T,"black"],[C,"1vh solid black"]]),n(U,O,[[T,"black"],[A,"".concat(Q," solid black")],[E,"-".concat(Q)]]),n(U,p,[[j,"white"],[A,"".concat(Q," solid black")],[E,"-".concat(Q)]]),n(U,y,[[j,"black"]]),n(U,w,[[j,"white"]]),n(U,S,[[A,"".concat(V," solid black")],[E,"-".concat(V)]]),U)),n($,m,(n(W={},g,[[j,"black"]]),n(W,k,[[T,"white"],[C,"1vh solid white"]]),n(W,O,[[T,"white"],[A,"".concat(Q," solid white")],[E,"-".concat(Q)]]),n(W,p,[[j,"black"],[A,"".concat(Q," solid white")],[E,"-".concat(Q)]]),n(W,y,[[j,"white"]]),n(W,w,[[j,"black"]]),n(W,S,[[T,"white"],[A,"".concat(V," solid white")],[E,"-".concat(V)]]),W)),n($,b,(n(Y={},g,[[j,"black"]]),n(Y,k,[[T,"red"],[C,"1vh solid blue"]]),n(Y,O,[[T,"red"],[A,"".concat(V," solid blue")],[E,"-".concat(V)]]),n(Y,p,[[j,"red"]]),n(Y,y,[[j,"blue"]]),n(Y,w,[[j,"black"]]),n(Y,S,[[T,"blue"],[A,"".concat(V," solid red")],[E,"-".concat(V)]]),Y)),$),nn=function(n,t){return Z[t]&&Z[t][n]?Z[t][n]:[]},tn=function(n,t){Object.values(Z).forEach((function(t){Object.values(t).forEach((function(t){for(var r=0;r<t.length;r+=1)n.style[t[r][0]]=""}))})),t.forEach((function(t){var r=R(t,2),e=r[0],o=r[1];a(n,e,o)}))},rn="whole_cross",en="random",on=(n(F={},rn,(function(n,t){return function(r,e){for(var o=function(n){u.some((function(t){var e=R(t,2),o=e[0],u=e[1];return o===r&&u===n}))||u.push([r,n])},u=[],i=0;i<n;i+=1)u.push([i,e]);for(var a=0;a<t;a+=1)o(a);return u}})),n(F,"small_cross",(function(n,t){return function(r,e){return[[0,0],[-1,0],[1,0],[0,-1],[0,1]].filter((function(o){return o[0]+r<n&&o[1]+e<t})).filter((function(n){return n[0]+r>=0&&n[1]+e>=0})).map((function(n){return[n[0]+r,n[1]+e]}))}})),n(F,"inverted_cross",(function(n,t){return function(r,e){return[[0,0],[-1,-1],[-1,1],[1,-1],[1,1]].filter((function(o){return o[0]+r<n&&o[1]+e<t})).filter((function(n){return n[0]+r>=0&&n[1]+e>=0})).map((function(n){return[n[0]+r,n[1]+e]}))}})),n(F,en,(function(n,t){var r=Object.keys(on).filter((function(n){return n!==en})),e=r[Math.floor(Math.random()*r.length)];return on[e](n,t)})),F);function un(n){if(Array.isArray(n))return B(n)}function an(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cn(n){return un(n)||D(n)||J(n)||an()}var ln=function(n,t,r,e){var o=on[r](e.length,e[0].length),u=e.map((function(n){return n.map((function(n){return n}))}));return o(n,t).forEach((function(n){var t=R(n,2),r=t[0],o=t[1];u[r][o]=!e[r][o]})),u},fn=function(n,t,r){var e=r.board,o=r.pattern,u=r.moves;return{board:ln(n,t,o,e),moves:cn(u).concat([[n,t]])}},dn=function(n){var t=n.board,r=n.pattern,e=n.moves;if(0===e.length)return{board:t,moves:e};var o=cn(e),u=R(o.pop(),2),i=u[0],a=u[1];return{board:ln(i,a,r,t),moves:o}},sn=function(n){for(var t=n.board,r=n.pattern,e=cn(n.moves),o=t.map((function(n){return n.map((function(n){return n}))}));e.length>0;){var u=dn({board:o,pattern:r,moves:e});o=u.board,e=u.moves}return{board:o,moves:e}},vn=function(n,t,r,e){return{rows:n,columns:t,stepsToSolve:r,pattern:e}},hn=vn(4,4,5,rn),mn=vn(5,5,10,rn),bn=vn(7,7,20,rn),pn=function(n,t,r){var e=function(n){return Math.floor(Math.random()*n)};return cn(Array(n)).map((function(){return[e(t),e(r)]}))},yn=function(n){var r=function(n){for(var t=n.rows,r=n.columns,e=n.stepsToSolve,o=n.pattern,u=cn(Array(t)).map((function(){return Array(r).fill(!0)})),i=pn(e,t,r),a=0;a<i.length;a+=1){var c=R(i[a],2),l=c[0],f=c[1];u=ln(l,f,o,u)}return{board:u,solution:i,pattern:o}}(t({},n)),e=r.board;P({solution:r.solution,pattern:r.pattern,moves:[]}),x({board:e},!1)},wn=function(n){return P({location:n})},gn=function(n){return P({theme:n})},kn=function(n,t){var r=t.width,e=t.height,o=t.margin;a(n,"width",r),a(n,"height",e),a(n,"margin",o)},On=function(n){var t=n.length,r=window.innerWidth<window.innerHeight?"vw":"vh",e=Math.floor(90/t*.95);return{margin:.05*e+r,width:e+r,height:e+r}},Sn=function(n){var r,e,o=n.target,u=_(),a=parseInt(i(o,G),10),c=parseInt(i(o,K),10);P(t({},fn(a,c,u))),_().board.every((function(n){return n.every((function(n){return n}))}))&&(r=function(){return wn("7")},e=500,window.setTimeout(r,e))},jn=function(n,t){return tn(n,nn(w,t))},Cn=function(n,t,r){tn(n,nn(t?p:y,r))},An=function(){var n=function(n){var a=function(e){var a,l,f=r("div");o(f).add("cell"),u(f,G,n),u(f,K,e),a="click",l=Sn,f.addEventListener(a,l),kn(f,On(i)),Cn(f,t.board[n][e],t.theme),z(["board"],(function(t){return Cn(f,t.board[n][e],t.theme)}),"cell-board-observer"),c.appendChild(f)},c=r("div");o(c).add("row");for(var l=0;l<i[n].length;l+=1)a(l);e.appendChild(c)};H("board-theme-observer"),H("cell-board-observer");var t=_(),e=r("div");o(e).add("board"),jn(e,t.theme),z(["theme"],(function(n){var t=n.theme;return jn(e,t)}),"board-theme-observer");for(var i=_().board,a=0;a<i.length;a+=1)n(a);return e},En=function(){var n;(n=".cell",document.querySelectorAll(n)).forEach((function(n){var t=_().board;kn(n,On(t))}))},Tn={currentLocation:null,map:{}};function In(n,t){Object.assign(Tn.map,t);z(["location"],(function(n){var t=n.location;if(t!==Tn.currentLocation){var r=e("#root");r.innerHTML="";var o=Tn.map[t];o="function"==typeof o?o():o,r.appendChild(o),Tn.currentLocation=t}})),P({location:n})}function Ln(n){var t=r("div");return o(t).add("ui-menu"),n&&n.forEach((function(n){return t.appendChild(n)})),tn(t,nn(g,_().theme)),z(["theme"],(function(n){var r=n.theme;tn(t,nn(g,r))}),"menu-theme-observer"),t}function Mn(n,t){var e=r("button");return e.innerText=n,e.onclick=t,o(e).add("ui-menu-item"),tn(e,nn(O,_().theme)),z(["theme"],(function(n){var t=n.theme;tn(e,nn(O,t))}),"menu-item-theme-observer"),e}function xn(n){var t=r("button");return t.innerText=n,t.disabled=!0,o(t).add("ui-menu-title"),tn(t,nn(k,_().theme)),z(["theme"],(function(n){var r=n.theme;tn(t,nn(k,r))}),"menu-theme-observer"),t}function Pn(n,t){var e=r("button");return o(e).add("status-line-button"),e.innerHTML=n,e.onclick=t,tn(e,nn(S,_().theme)),e}var _n=function(){var n=_();P(t({},dn(n)))};function zn(){var n=r("div");return o(n).add("status-line"),n.appendChild(Pn("back",(function(){return wn(l)}))),n.appendChild(Pn("undo",_n)),n.appendChild(Pn("reset",(function(){return wn(v)}))),n}function Hn(){var n=r("div");return a(n,"height","100%"),n.appendChild(An()),n.appendChild(zn()),n}function Nn(){var n,t=Ln();return t.appendChild(xn("Renverso")),t.appendChild(Mn("New game",(function(){return wn(f)}))),t.appendChild((n=Mn("Continue",(function(){return wn(s)})),a(n,"display","none"),z(["pattern"],(function(t){var r=t.pattern;a(n,"display",null===r?"none":"block")})),n)),t.appendChild(Mn("Color theme",(function(){return wn(d)}))),t}var Dn=function(){var n=_();P(t({},sn(n))),wn(s)};var qn=function(){P({board:[],moves:[],solution:[],pattern:null,location:l})},Bn=function(n){return"move".concat(n.length>1?"s":"")};var Jn=function(n){yn(n),wn(s)};window.onresize=function(){En()},window.onload=function(){var r;In(l,(n(r={},l,Nn()),n(r,f,Ln([xn("Select level"),Mn("Easy",(function(){return Jn(hn)})),Mn("Medium",(function(){return Jn(mn)})),Mn("Hard",(function(){return Jn(bn)})),Mn("Back",(function(){return wn(l)}))])),n(r,d,Ln([xn("Select color theme"),Mn("Light",(function(){return gn(h)})),Mn("Dark",(function(){return gn(m)})),Mn("Lazy eye",(function(){return gn(b)})),Mn("Back",(function(){return wn(l)}))])),n(r,s,(function(){return Hn()})),n(r,v,Ln([xn("Do you want to reset level progress?"),Mn("Yes",(function(){return Dn()})),Mn("No",(function(){return wn(s)}))])),n(r,"7",(function(){return n=_().moves,Ln([xn("Puzzle solved in ".concat(n.length," ").concat(Bn(n),"!")),Mn("To main menu",qn)]);var n})),r));var e,o=(e=X,window.localStorage.getItem(e));P(null!==o?t({},JSON.parse(o)):{theme:"light"}),z(Object.keys(_()),(function(n){return c(X,JSON.stringify(n))}))}}();