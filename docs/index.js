!function(){const e=e=>document.createElement(e),t=e=>document.querySelector(e),o=e=>e.classList,n=(e,t,o)=>e.setAttribute(t,o),r=(e,t)=>e.getAttribute(t),l=(e,t,o)=>e.style.setProperty(t,o),a=(e,t)=>window.localStorage.setItem(e,t),i="1",s="3",c="4",d="5",h="6",u="light",m="dark",b="lazy",p="cell",f="flipped_cell",v="board",w="menu",g="menu-title",k="menu-title-item",y="status-line-button",$="background-color",C="border-bottom",E="outline",O="outline-offset",S="color",L={location:i,board:[],moves:[],solution:[],pattern:null,theme:u},j={...L};let M=[];function T(e,t){Object.assign(j,e);const o=Object.keys(e);t&&M.forEach((({properties:e,callback:t})=>{(e.some((e=>o.includes(e)))||0===e.length)&&t(j)}))}function x(e){T(e,!0)}function A(){return j}function _(e,t,o){const n=Object.keys(j);e.forEach((e=>{if(!n.includes(e))throw new Error(`${e} is not key in the state.`)})),M.push({properties:e,callback:t,name:o})}function z(e){M=M.filter((t=>t.name!==e))}const H="row_index",I="column_index",N="5px",q="2px",B="82a14105-d791-49b1-a07a-6500b49e2cdb",D={[u]:{[w]:[[$,"white"]],[g]:[[S,"black"],[C,"1vh solid black"]],[k]:[[S,"black"],[E,`${N} solid black`],[O,`-${N}`]],[p]:[[$,"white"],[E,`${N} solid black`],[O,`-${N}`]],[f]:[[$,"black"]],[v]:[[$,"white"]],[y]:[[E,`${q} solid black`],[O,`-${q}`]]},[m]:{[w]:[[$,"black"]],[g]:[[S,"white"],[C,"1vh solid white"]],[k]:[[S,"white"],[E,`${N} solid white`],[O,`-${N}`]],[p]:[[$,"black"],[E,`${N} solid white`],[O,`-${N}`]],[f]:[[$,"white"]],[v]:[[$,"black"]],[y]:[[S,"white"],[E,`${q} solid white`],[O,`-${q}`]]},[b]:{[w]:[[$,"black"]],[g]:[[S,"red"],[C,"1vh solid blue"]],[k]:[[S,"red"],[E,`${q} solid blue`],[O,`-${q}`]],[p]:[[$,"red"]],[f]:[[$,"blue"]],[v]:[[$,"black"]],[y]:[[S,"blue"],[E,`${q} solid red`],[O,`-${q}`]]}},J=(e,t)=>D[t]&&D[t][e]?D[t][e]:[],P=(e,t)=>{Object.values(D).forEach((t=>{Object.values(t).forEach((t=>{for(let o=0;o<t.length;o+=1)e.style[t[o][0]]=""}))})),t.forEach((([t,o])=>{l(e,t,o)}))},R="whole_cross",W="random",Y={[R]:(e,t)=>(o,n)=>{const r=[];for(let t=0;t<e;t+=1)r.push([t,n]);for(let e=0;e<t;e+=1)r.some((([t,n])=>t===o&&n===e))||r.push([o,e]);return r},small_cross:(e,t)=>(o,n)=>[[0,0],[-1,0],[1,0],[0,-1],[0,1]].filter((r=>r[0]+o<e&&r[1]+n<t)).filter((e=>e[0]+o>=0&&e[1]+n>=0)).map((e=>[e[0]+o,e[1]+n])),inverted_cross:(e,t)=>(o,n)=>[[0,0],[-1,-1],[-1,1],[1,-1],[1,1]].filter((r=>r[0]+o<e&&r[1]+n<t)).filter((e=>e[0]+o>=0&&e[1]+n>=0)).map((e=>[e[0]+o,e[1]+n])),[W]:(e,t)=>{const o=Object.keys(Y).filter((e=>e!==W)),n=o[Math.floor(Math.random()*o.length)];return Y[n](e,t)}},F=(e,t,o,n)=>{const r=Y[o](n.length,n[0].length);const l=n.map((e=>e.map((e=>e))));return r(e,t).forEach((([e,t])=>{l[e][t]=!n[e][t]})),l},G=(e,t,{board:o,pattern:n,moves:r})=>({board:F(e,t,n,o),moves:[...r,[e,t]]}),K=({board:e,pattern:t,moves:o})=>{if(0===o.length)return{board:e,moves:o};const n=[...o],[r,l]=n.pop();return{board:F(r,l,t,e),moves:n}},Q=({board:e,pattern:t,moves:o})=>{let n=[...o],r=e.map((e=>e.map((e=>e))));for(;n.length>0;){const e=K({board:r,pattern:t,moves:n});r=e.board,n=e.moves}return{board:r,moves:n}},U=(e,t,o,n)=>({rows:e,columns:t,stepsToSolve:o,pattern:n}),V=U(4,4,5,R),X=U(5,5,10,R),Z=U(7,7,20,R),ee=(e,t,o)=>{const n=e=>Math.floor(Math.random()*e);return[...Array(e)].map((()=>[n(t),n(o)]))},te=e=>{const{board:t,solution:o,pattern:n}=(({rows:e,columns:t,stepsToSolve:o,pattern:n})=>{let r=[...Array(e)].map((()=>Array(t).fill(!0)));const l=ee(o,e,t);for(let e=0;e<l.length;e+=1){const[t,o]=l[e];r=F(t,o,n,r)}return{board:r,solution:l,pattern:n}})({...e});x({solution:o,pattern:n,moves:[]}),T({board:t},!1)},oe=e=>x({location:e}),ne=e=>x({theme:e}),re=(e,{width:t,height:o,margin:n})=>{l(e,"width",t),l(e,"height",o),l(e,"margin",n)},le=e=>{const t=e.length,o=window.innerWidth<window.innerHeight?"vw":"vh",n=Math.floor(90/t*.95);return{margin:.05*n+o,width:n+o,height:n+o}},ae=({target:e})=>{const t=A(),o=parseInt(r(e,H),10),n=parseInt(r(e,I),10);var l,a;x({...G(o,n,t)}),A().board.every((e=>e.every((e=>e))))&&(l=()=>oe("7"),a=500,window.setTimeout(l,a))},ie=(e,t)=>P(e,J(v,t)),se=(e,t,o)=>{P(e,J(t?p:f,o))},ce=()=>{z("board-theme-observer"),z("cell-board-observer");const t=A(),r=e("div");o(r).add("board"),ie(r,t.theme),_(["theme"],(({theme:e})=>ie(r,e)),"board-theme-observer");const{board:l}=A();for(let s=0;s<l.length;s+=1){const c=e("div");o(c).add("row");for(let r=0;r<l[s].length;r+=1){const d=e("div");o(d).add("cell"),n(d,H,s),n(d,I,r),a="click",i=ae,d.addEventListener(a,i),re(d,le(l)),se(d,t.board[s][r],t.theme),_(["board"],(e=>se(d,e.board[s][r],e.theme)),"cell-board-observer"),c.appendChild(d)}r.appendChild(c)}var a,i;return r},de=()=>{var e;(e=".cell",document.querySelectorAll(e)).forEach((e=>{const{board:t}=A();re(e,le(t))}))},he={currentLocation:null,map:{}};function ue(e,o){Object.assign(he.map,o);_(["location"],(({location:e})=>{if(e!==he.currentLocation){const o=t("#root");o.innerHTML="";let n=he.map[e];n="function"==typeof n?n():n,o.appendChild(n),he.currentLocation=e}})),x({location:e})}function me(t){const n=e("div");return o(n).add("ui-menu"),t&&t.forEach((e=>n.appendChild(e))),P(n,J(w,A().theme)),_(["theme"],(({theme:e})=>{P(n,J(w,e))}),"menu-theme-observer"),n}function be(t,n){const r=e("button");return r.innerText=t,r.onclick=n,o(r).add("ui-menu-item"),P(r,J(k,A().theme)),_(["theme"],(({theme:e})=>{P(r,J(k,e))}),"menu-item-theme-observer"),r}function pe(t){const n=e("button");return n.innerText=t,n.disabled=!0,o(n).add("ui-menu-title"),P(n,J(g,A().theme)),_(["theme"],(({theme:e})=>{P(n,J(g,e))}),"menu-theme-observer"),n}function fe(t,n){const r=e("button");return o(r).add("status-line-button"),r.innerHTML=t,r.onclick=n,P(r,J(y,A().theme)),r}const ve=()=>{const e=A();x({...K(e)})};function we(){const t=e("div");return o(t).add("status-line"),t.appendChild(fe("back",(()=>oe(i)))),t.appendChild(fe("undo",ve)),t.appendChild(fe("reset",(()=>oe(h)))),t}function ge(){const t=e("div");return l(t,"height","100%"),t.appendChild(ce()),t.appendChild(we()),t}function ke(){const e=be("Continue",(()=>oe(d)));return l(e,"display","none"),_(["pattern"],(({pattern:t})=>{l(e,"display",null===t?"none":"block")})),e}function ye(){const e=me();return e.appendChild(pe("Renverso")),e.appendChild(be("New game",(()=>oe(s)))),e.appendChild(ke()),e.appendChild(be("Color theme",(()=>oe(c)))),e}const $e=()=>{const e=A();x({...Q(e)}),oe(d)};const Ce=()=>{x({board:[],moves:[],solution:[],pattern:null,location:i})},Ee=e=>"move"+(e.length>1?"s":"");function Oe(){const{moves:e}=A();return me([pe(`Puzzle solved in ${e.length} ${Ee(e)}!`),be("To main menu",Ce)])}const Se=e=>{te(e),oe(d)};window.onresize=()=>{de()},window.onload=()=>{ue(i,{[i]:ye(),[s]:me([pe("Select level"),be("Easy",(()=>Se(V))),be("Medium",(()=>Se(X))),be("Hard",(()=>Se(Z))),be("Back",(()=>oe(i)))]),[c]:me([pe("Select color theme"),be("Light",(()=>ne(u))),be("Dark",(()=>ne(m))),be("Lazy eye",(()=>ne(b))),be("Back",(()=>oe(i)))]),[d]:()=>ge(),[h]:me([pe("Do you want to reset level progress?"),be("Yes",(()=>$e())),be("No",(()=>oe(d)))]),7:()=>Oe()});const e=(t=B,window.localStorage.getItem(t));var t;x(null!==e?{...JSON.parse(e)}:{theme:"light"});_(Object.keys(A()),(e=>a(B,JSON.stringify(e))))}}();